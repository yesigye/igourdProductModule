import{r as m,c as f,o as u,b as n,a as e,t as o,w as t,d as r,u as N,e as he,f as Oe,g as _,h as b,F as q,i as R,j as h,k as Ie,l as W,m as ye,E as O,n as We,p as J,q as qe,s as Re,v as Ge,x as He,y as Qe,z as ge,A as Xe,B as Ye,C as Je,D as Ze}from"./index-DaTt_SEd.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import et from"./ProductForm-Df1TsxS6.js";const tt={class:"product-details-drawer"},at={class:"drawer-header"},lt={class:"product-title"},st={class:"header-actions"},ot={class:"drawer-content"},nt={key:0},ut={key:1,class:"text-muted"},rt={class:"card-header"},dt={class:"specs-grid"},it={class:"spec-header"},ct={class:"values-count"},ft={class:"spec-values"},vt={class:"card-header"},pt={class:"sku-summary"},mt={class:"summary-item"},_t={class:"value"},yt={class:"summary-item"},gt={class:"value"},wt={class:"summary-item"},ht={class:"value"},bt={__name:"ProductDetailsDrawer",props:{product:{type:Object,required:!0}},emits:["edit","close"],setup(d,{emit:A}){const P=d,j=A,x=()=>{j("edit",P.product.id)},$=()=>{j("close")},V=C=>C?new Date(C).toLocaleString():"--",I=C=>{if(!C||typeof C!="object")return"--";const c=Object.entries(C);if(c.length===0)return"--";const[k,K]=c[0];return`${k}: $${K||"0.00"}`};return(C,c)=>{const k=m("el-tag"),K=m("el-icon"),M=m("el-button"),v=m("el-descriptions-item"),D=m("el-descriptions"),S=m("el-card"),g=m("el-table-column"),L=m("el-table"),E=m("el-col"),Z=m("el-row"),ee=m("el-empty");return u(),f("div",tt,[n("div",at,[n("div",lt,[n("h3",null,o(d.product.nameMajor),1),e(k,{type:d.product.status==="onsale"?"success":"info"},{default:t(()=>[r(o(d.product.status),1)]),_:1},8,["type"])]),n("div",st,[e(M,{onClick:x,type:"primary"},{default:t(()=>[e(K,null,{default:t(()=>[e(N(he))]),_:1}),c[0]||(c[0]=r(" Edit ",-1))]),_:1}),e(M,{onClick:$},{default:t(()=>[e(K,null,{default:t(()=>[e(N(Oe))]),_:1}),c[1]||(c[1]=r(" Close ",-1))]),_:1})])]),n("div",ot,[e(S,{class:"info-card"},{header:t(()=>[...c[2]||(c[2]=[n("div",{class:"card-header"},[n("span",null,"Basic Information")],-1)])]),default:t(()=>[e(D,{column:2,border:""},{default:t(()=>[e(v,{label:"Product Code"},{default:t(()=>[r(o(d.product.productCode),1)]),_:1}),e(v,{label:"Name(Minor)"},{default:t(()=>[r(o(d.product.nameMinor||"--"),1)]),_:1}),e(v,{label:"Category"},{default:t(()=>[r(o(d.product.category||"--"),1)]),_:1}),e(v,{label:"Spec Model"},{default:t(()=>[r(o(d.product.specModel||"--"),1)]),_:1}),e(v,{label:"VAT"},{default:t(()=>[r(o(d.product.vat||"--"),1)]),_:1}),e(v,{label:"Excise Duty"},{default:t(()=>[r(o(d.product.exciseDuty||"--"),1)]),_:1}),e(v,{label:"Other TAX"},{default:t(()=>[r(o(d.product.otherTax||"--"),1)]),_:1}),e(v,{label:"Product Label"},{default:t(()=>[r(o(d.product.productLabel||"--"),1)]),_:1}),e(v,{label:"Shelf Life Mgmt"},{default:t(()=>[r(o(d.product.shelfLifeMgmt?"Enabled":"Disabled"),1)]),_:1}),e(v,{label:"Batch Mgmt"},{default:t(()=>[r(o(d.product.batchMgmt?"Enabled":"Disabled"),1)]),_:1}),e(v,{label:"Created"},{default:t(()=>[r(o(V(d.product.createdAt)),1)]),_:1}),e(v,{label:"Last Updated"},{default:t(()=>[r(o(V(d.product.updatedAt)),1)]),_:1})]),_:1})]),_:1}),d.product.units&&d.product.units.length>0?(u(),_(S,{key:0,class:"info-card"},{header:t(()=>[...c[3]||(c[3]=[n("div",{class:"card-header"},[n("span",null,"Units Configuration")],-1)])]),default:t(()=>[e(L,{data:d.product.units,style:{width:"100%"}},{default:t(()=>[e(g,{prop:"name",label:"Unit Name"}),e(g,{prop:"rate",label:"Unit Rate"}),e(g,{label:"Type"},{default:t(({$index:y})=>[y===0?(u(),_(k,{key:0,type:"success"},{default:t(()=>[...c[4]||(c[4]=[r("Major Unit",-1)])]),_:1})):(u(),_(k,{key:1,type:"info"},{default:t(()=>[...c[5]||(c[5]=[r("Minor Unit",-1)])]),_:1}))]),_:1}),e(g,{label:"Conversion"},{default:t(({row:y,$index:F})=>[F>0?(u(),f("span",nt," 1 "+o(y.name)+" = "+o(y.rate)+" "+o(d.product.units[0].name),1)):(u(),f("span",ut,"Base Unit"))]),_:1})]),_:1},8,["data"])]),_:1})):b("",!0),d.product.specifications&&d.product.specifications.length>0?(u(),_(S,{key:1,class:"info-card"},{header:t(()=>[n("div",rt,[c[6]||(c[6]=n("span",null,"Specifications",-1)),e(k,null,{default:t(()=>[r(o(d.product.specifications.length)+" Specs",1)]),_:1})])]),default:t(()=>[n("div",dt,[(u(!0),f(q,null,R(d.product.specifications,(y,F)=>(u(),f("div",{key:F,class:"spec-item"},[n("div",it,[n("strong",null,o(y.name),1),n("span",ct,o(y.values.length)+" values",1)]),n("div",ft,[(u(!0),f(q,null,R(y.values,H=>(u(),_(k,{key:H,size:"small",style:{margin:"2px"}},{default:t(()=>[r(o(H),1)]),_:2},1024))),128))])]))),128))])]),_:1})):b("",!0),d.product.skus&&d.product.skus.length>0?(u(),_(S,{key:2,class:"info-card"},{header:t(()=>[n("div",vt,[c[7]||(c[7]=n("span",null,"SKU List",-1)),e(k,{type:"success"},{default:t(()=>[r(o(d.product.skus.length)+" SKUs",1)]),_:1})])]),default:t(()=>[e(L,{data:d.product.skus,border:"",style:{width:"100%"},"max-height":"300",size:"small"},{default:t(()=>[e(g,{type:"index",width:"50"}),e(g,{prop:"status",label:"Status",width:"80"},{default:t(({row:y})=>[e(k,{type:y.status==="active"?"success":"info",size:"small"},{default:t(()=>[r(o(y.status==="active"?"● Open":"● Close"),1)]),_:2},1032,["type"])]),_:1}),(u(!0),f(q,null,R(d.product.specifications,y=>(u(),_(g,{key:y.name,label:y.name,width:"100"},{default:t(({row:F})=>[r(o(F.specs[y.name]),1)]),_:2},1032,["label"]))),128)),e(g,{prop:"skuCode",label:"SKU Code",width:"120"}),e(g,{prop:"barcode",label:"Barcode",width:"130"}),e(g,{prop:"stock",label:"Stock",width:"80"}),e(g,{prop:"unit",label:"Unit",width:"80"}),e(g,{label:"Selling Price",width:"100"},{default:t(({row:y})=>[r(o(I(y.prices)),1)]),_:1}),e(g,{prop:"costPrice",label:"Cost Price",width:"100"},{default:t(({row:y})=>[r(o(y.costPrice?`$${y.costPrice}`:"--"),1)]),_:1})]),_:1},8,["data"]),n("div",pt,[e(Z,{gutter:20},{default:t(()=>[e(E,{span:8},{default:t(()=>[n("div",mt,[c[8]||(c[8]=n("span",{class:"label"},"Total SKUs:",-1)),n("span",_t,o(d.product.skus.length),1)])]),_:1}),e(E,{span:8},{default:t(()=>[n("div",yt,[c[9]||(c[9]=n("span",{class:"label"},"Active SKUs:",-1)),n("span",gt,o(d.product.skus.filter(y=>y.status==="active").length),1)])]),_:1}),e(E,{span:8},{default:t(()=>[n("div",wt,[c[10]||(c[10]=n("span",{class:"label"},"Total Stock:",-1)),n("span",ht,o(d.product.skus.reduce((y,F)=>y+(F.stock||0),0)),1)])]),_:1})]),_:1})])]),_:1})):b("",!0),!d.product.skus||d.product.skus.length===0?(u(),_(ee,{key:3,description:"No SKUs generated for this product","image-size":100})):b("",!0)])])}}},kt=de(bt,[["__scopeId","data-v-65e6d917"]]),St={class:"product-form-drawer"},Ct={class:"drawer-header"},Pt={class:"header-content"},$t={class:"header-actions"},Ut={class:"drawer-content"},xt={__name:"ProductFormDrawer",props:{mode:{type:String,required:!0,validator:d=>["add","edit"].includes(d)},productId:{type:[String,Number],default:null}},emits:["saved","cancel"],setup(d,{emit:A}){const P=d,j=A,x=h(),$=h(!1),V=h(0),I=Ie({nameMajor:""}),C=W(()=>x.value?.isFormValid||!1);ye(()=>x.value?.productForm,v=>{v&&Object.assign(I,v)},{deep:!0,immediate:!0});const c=async()=>{if(!x.value){O.error("Form not ready");return}$.value=!0;try{await x.value.handleSave()}catch(v){O.error("Failed to save product: "+v.message),$.value=!1}},k=async()=>{if(!x.value){O.error("Form not ready");return}$.value=!0;try{await x.value.handleSaveAndAdd(),V.value++}catch(v){O.error("Failed to save product: "+v.message)}finally{$.value=!1}},K=()=>{$.value=!1,j("saved")},M=()=>{j("cancel")};return ye(()=>P.mode,()=>{P.mode==="add"&&V.value++}),(v,D)=>{const S=m("el-button");return u(),f("div",St,[n("div",Ct,[n("div",Pt,[n("h3",null,o(d.mode==="add"?"Add Product":`Edit Product - ${I.nameMajor}`),1),n("div",$t,[e(S,{onClick:M},{default:t(()=>[...D[0]||(D[0]=[r("Cancel",-1)])]),_:1}),e(S,{type:"primary",onClick:c,loading:$.value,disabled:!C.value},{default:t(()=>[r(o($.value?"Saving...":"Save"),1)]),_:1},8,["loading","disabled"]),d.mode==="add"?(u(),_(S,{key:0,type:"primary",onClick:k,loading:$.value,disabled:!C.value},{default:t(()=>[r(o($.value?"Saving...":"Save & Add Another"),1)]),_:1},8,["loading","disabled"])):b("",!0)])])]),n("div",Ut,[(u(),_(et,{ref_key:"productFormRef",ref:x,"product-id":d.productId,key:V.value,onSaved:K,onCancel:M},null,8,["product-id"]))])])}}},we=de(xt,[["__scopeId","data-v-394ce499"]]),Vt={class:"product-list"},Dt={class:"card-header"},At={class:"header-left"},Mt={class:"filters"},Ft={key:0,class:"active-filters"},zt={key:0,class:"sku-expand-content"},Kt={class:"expand-header"},Lt={class:"sku-summary"},Et={class:"sku-code"},jt={class:"barcode"},Tt={class:"prices-list"},Bt={class:"unit"},Nt={class:"price"},Ot={key:0,class:"text-muted"},It={key:0,class:"cost-price"},Wt={key:1,class:"text-muted"},qt={key:0,class:"total-value"},Rt={key:1,class:"text-muted"},Gt={key:1,class:"no-skus-message"},Ht={class:"product-code"},Qt={class:"product-name"},Xt={key:0,class:"product-name-minor"},Yt={key:1,class:"text-muted"},Jt={key:0,class:"spec-model"},Zt={key:1,class:"text-muted"},ea={class:"sku-count"},ta={key:1,class:"text-muted"},aa={class:"date-cell"},la={class:"date"},sa={class:"time"},oa={class:"pagination-container"},na={class:"pagination-info"},ua={key:0,class:"filtered-info"},ra={key:0,class:"empty-state"},da={key:0},ia={key:1},ca={key:0,class:"stats-content"},fa={class:"sku-stats"},va={class:"stat-item"},pa={class:"value"},ma={class:"stat-item"},_a={class:"value"},ya={__name:"ProductList",setup(d){const A=h([]),P=h([]),j=h([]),x=h(!1),$=h(!1),V=h(null),I=h(!1),C=h(!1),c=h(!1),k=h(!1),K=h(null),M=h(null),v=h(""),D=h(""),S=h(""),g=h(""),L=h(1),E=h(10),Z=W(()=>{const s=(L.value-1)*E.value,a=s+E.value;return P.value.slice(s,a)}),ee=W(()=>(L.value-1)*E.value+1),y=W(()=>{const s=L.value*E.value;return s>P.value.length?P.value.length:s}),F=W(()=>v.value||D.value||S.value||g.value),H=W(()=>A.value.reduce((s,a)=>s+(a.skus?.length||0),0)),be=W(()=>{const s=A.value.filter(a=>a.skus&&a.skus.length>0).length;return s>0?(H.value/s).toFixed(1):"0.0"});We(async()=>{await te(),await ke(),await ae(),Se()});async function te(){x.value=!0;try{A.value=await J.getAllProducts(),P.value=A.value}catch(s){O.error("Failed to load products: "+s.message)}finally{x.value=!1}}async function ke(){try{j.value=await J.getAllCategories()}catch(s){console.error("Failed to load categories:",s)}}async function ae(){try{V.value=await J.getProductStats()}catch(s){console.error("Failed to load stats:",s)}}function Se(){const s=A.value.some(a=>a.productCode==="IP15P-001");I.value=s}function le(){oe()}function se(){oe()}function oe(){let s=A.value;if(v.value){const a=v.value.toLowerCase();s=s.filter(p=>p.nameMajor?.toLowerCase().includes(a)||p.productCode?.toLowerCase().includes(a)||p.nameMinor?.toLowerCase().includes(a)||p.category?.toLowerCase().includes(a)||p.specModel?.toLowerCase().includes(a))}D.value&&(s=s.filter(a=>a.status===D.value)),S.value&&(s=s.filter(a=>a.category===S.value)),g.value==="with"?s=s.filter(a=>a.skus&&a.skus.length>0):g.value==="without"&&(s=s.filter(a=>!a.skus||a.skus.length===0)),P.value=s,L.value=1}function Q(s){switch(s){case"status":D.value="";break;case"category":S.value="";break;case"hasSkus":g.value="";break;case"search":v.value="";break}oe()}function ie(){v.value="",D.value="",S.value="",g.value="",P.value=A.value,L.value=1}function Ce(s){const{prop:a,order:p}=s;a&&P.value.sort((T,z)=>{let G=T[a],U=z[a];return a==="createdAt"&&(G=new Date(G),U=new Date(U)),p==="ascending"?G>U?1:-1:G<U?1:-1})}function Pe(s){return s?new Date(s).toLocaleDateString():"--"}function $e(s){return s?new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--"}function Ue(s){return s.skus?s.skus.filter(a=>a.status==="active").length:0}function xe(s){return s.skus?s.skus.filter(a=>a.status!=="active").length:0}function Ve(s){return s.skus?s.skus.reduce((a,p)=>a+(p.stock||0),0):0}function De(s){return s?s<10?"low-stock":s>=50?"good-stock":"normal-stock":"no-stock"}function ce(s){if(!s.costPrice||!s.prices)return"--";const a=Object.values(s.prices)[0]||0;return!a||s.costPrice===0?"--":`${((a-s.costPrice)/s.costPrice*100).toFixed(1)}%`}function Ae(s){if(s==="--")return"";const a=parseFloat(s);return a>50?"high-margin":a>20?"good-margin":a>0?"low-margin":"negative-margin"}function Me(s){M.value=s,c.value=!0}function fe(){C.value=!0}function Fe(s){M.value=s,c.value=!0}function ze(s){K.value=s,k.value=!0}function Ke(s){k.value=!1;const a=A.value.find(p=>p.id===s);a&&(M.value=a,c.value=!0)}async function ve(){C.value=!1,c.value=!1,await te(),await ae(),O.success("Product saved successfully!")}async function Le(s){try{await Ze.confirm("Are you sure you want to delete this product? This action cannot be undone.","Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}),await J.deleteProduct(s),O.success("Product deleted successfully!"),await te(),await ae()}catch(a){a!=="cancel"&&O.error("Failed to delete product: "+a.message)}}return(s,a)=>{const p=m("el-tag"),T=m("el-icon"),z=m("el-button"),G=m("el-input"),U=m("el-col"),B=m("el-option"),ne=m("el-select"),ue=m("el-row"),w=m("el-table-column"),pe=m("el-table"),me=m("el-empty"),Ee=m("el-button-group"),je=m("el-pagination"),Te=m("el-card"),re=m("el-drawer"),X=m("el-statistic"),Be=m("el-dialog"),Ne=qe("loading");return u(),f("div",Vt,[e(Te,null,{header:t(()=>[n("div",Dt,[n("div",At,[a[19]||(a[19]=n("span",null,"Product List",-1)),I.value?(u(),_(p,{key:0,type:"info",size:"small",style:{"margin-left":"10px"}},{default:t(()=>[...a[18]||(a[18]=[r(" Sample Data ",-1)])]),_:1})):b("",!0)]),e(z,{type:"primary",onClick:fe},{default:t(()=>[e(T,null,{default:t(()=>[e(N(Je))]),_:1}),a[20]||(a[20]=r(" Add Product ",-1))]),_:1})])]),default:t(()=>[n("div",Mt,[e(ue,{gutter:20},{default:t(()=>[e(U,{span:6},{default:t(()=>[e(G,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=l=>v.value=l),placeholder:"Search by name, code, or category...",clearable:"",onClear:le,onKeyup:Ge(le,["enter"])},{append:t(()=>[e(z,{onClick:le},{default:t(()=>[e(T,null,{default:t(()=>[e(N(He))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(U,{span:4},{default:t(()=>[e(ne,{modelValue:D.value,"onUpdate:modelValue":a[1]||(a[1]=l=>D.value=l),placeholder:"Status",clearable:"",onChange:se},{default:t(()=>[e(B,{label:"All Status",value:""}),e(B,{label:"On Sale",value:"onsale"}),e(B,{label:"Off Sale",value:"offsale"})]),_:1},8,["modelValue"])]),_:1}),e(U,{span:4},{default:t(()=>[e(ne,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=l=>S.value=l),placeholder:"Category",clearable:"",onChange:se},{default:t(()=>[e(B,{label:"All Categories",value:""}),(u(!0),f(q,null,R(j.value,l=>(u(),_(B,{key:l.id,label:l.name,value:l.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(U,{span:4},{default:t(()=>[e(ne,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=l=>g.value=l),placeholder:"SKUs",clearable:"",onChange:se},{default:t(()=>[e(B,{label:"All Products",value:""}),e(B,{label:"With SKUs",value:"with"}),e(B,{label:"Without SKUs",value:"without"})]),_:1},8,["modelValue"])]),_:1}),e(U,{span:3},{default:t(()=>[e(z,{onClick:ie,type:"default"},{default:t(()=>[...a[21]||(a[21]=[r(" Reset ",-1)])]),_:1})]),_:1}),e(U,{span:3,style:{"text-align":"right"}},{default:t(()=>[e(z,{onClick:a[4]||(a[4]=l=>$.value=!0),type:"info"},{default:t(()=>[e(T,null,{default:t(()=>[e(N(Qe))]),_:1}),a[22]||(a[22]=r(" Stats ",-1))]),_:1})]),_:1})]),_:1}),F.value?(u(),f("div",Ft,[a[23]||(a[23]=n("span",{class:"filters-label"},"Active Filters:",-1)),D.value?(u(),_(p,{key:0,closable:"",onClose:a[5]||(a[5]=l=>Q("status")),type:"success"},{default:t(()=>[r(" Status: "+o(D.value==="onsale"?"On Sale":"Off Sale"),1)]),_:1})):b("",!0),S.value?(u(),_(p,{key:1,closable:"",onClose:a[6]||(a[6]=l=>Q("category")),type:"warning"},{default:t(()=>[r(" Category: "+o(S.value),1)]),_:1})):b("",!0),g.value?(u(),_(p,{key:2,closable:"",onClose:a[7]||(a[7]=l=>Q("hasSkus")),type:"primary"},{default:t(()=>[r(" SKUs: "+o(g.value==="with"?"With SKUs":"Without SKUs"),1)]),_:1})):b("",!0),v.value?(u(),_(p,{key:3,closable:"",onClose:a[8]||(a[8]=l=>Q("search")),type:"info"},{default:t(()=>[r(' Search: "'+o(v.value)+'" ',1)]),_:1})):b("",!0)])):b("",!0)]),Re((u(),_(pe,{data:Z.value,onSortChange:Ce,stripe:"",style:{width:"100%"}},{default:t(()=>[e(w,{type:"expand",width:"60"},{default:t(l=>[l.row.skus&&l.row.skus.length>0?(u(),f("div",zt,[n("div",Kt,[n("h4",null,"SKU List for "+o(l.row.nameMajor),1),n("div",Lt,[e(p,{type:"primary"},{default:t(()=>[r(o(l.row.skus.length)+" SKUs",1)]),_:2},1024),e(p,{type:"success"},{default:t(()=>[r(" Active: "+o(Ue(l.row)),1)]),_:2},1024),e(p,{type:"info"},{default:t(()=>[r(" Inactive: "+o(xe(l.row)),1)]),_:2},1024),e(p,{type:"warning"},{default:t(()=>[r(" Total Stock: "+o(Ve(l.row)),1)]),_:2},1024)])]),e(pe,{data:l.row.skus,border:"",size:"small",style:{width:"100%","margin-top":"16px"}},{default:t(()=>[e(w,{type:"index",width:"50",label:"#"}),e(w,{prop:"status",label:"Status",width:"80"},{default:t(i=>[e(p,{type:i.row.status==="active"?"success":"info",size:"small"},{default:t(()=>[r(o(i.row.status==="active"?"Active":"Inactive"),1)]),_:2},1032,["type"])]),_:1}),(u(!0),f(q,null,R(l.row.specifications,i=>(u(),_(w,{key:i.name,label:i.name,width:"120"},{default:t(Y=>[e(p,{size:"small",effect:"plain"},{default:t(()=>[r(o(Y.row.specs?Y.row.specs[i.name]:""),1)]),_:2},1024)]),_:2},1032,["label"]))),128)),e(w,{prop:"skuCode",label:"SKU Code",width:"130"},{default:t(i=>[n("code",Et,o(i.row.skuCode),1)]),_:1}),e(w,{prop:"barcode",label:"Barcode",width:"140"},{default:t(i=>[n("code",jt,o(i.row.barcode),1)]),_:1}),e(w,{prop:"stock",label:"Stock",width:"100"},{default:t(i=>[n("span",{class:ge(De(i.row.stock))},o(i.row.stock||0),3)]),_:1}),e(w,{prop:"unit",label:"Unit",width:"80"},{default:t(i=>[r(o(i.row.unit||"Pcs"),1)]),_:1}),e(w,{label:"Prices",width:"180"},{default:t(i=>[n("div",Tt,[(u(!0),f(q,null,R(i.row.prices||{},(Y,_e)=>(u(),f("div",{key:_e,class:"price-item"},[n("span",Bt,o(_e)+":",1),n("span",Nt,"$"+o(Y),1)]))),128)),!i.row.prices||Object.keys(i.row.prices).length===0?(u(),f("div",Ot," No prices ")):b("",!0)])]),_:1}),e(w,{label:"Cost Price",width:"110"},{default:t(i=>[i.row.costPrice?(u(),f("span",It,"$"+o(i.row.costPrice),1)):(u(),f("span",Wt,"--"))]),_:1}),e(w,{label:"Profit Margin",width:"120"},{default:t(i=>[n("span",{class:ge(Ae(ce(i.row)))},o(ce(i.row)),3)]),_:1}),e(w,{label:"Value",width:"120"},{default:t(i=>[i.row.costPrice&&i.row.stock?(u(),f("span",qt," $"+o((i.row.costPrice*i.row.stock).toFixed(2)),1)):(u(),f("span",Rt,"--"))]),_:1})]),_:2},1032,["data"])])):(u(),f("div",Gt,[e(me,{description:"No SKUs generated for this product","image-size":80},{default:t(()=>[e(z,{type:"primary",size:"small",onClick:i=>Me(l.row)},{default:t(()=>[...a[24]||(a[24]=[r(" Generate SKUs ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]))]),_:1}),e(w,{type:"index",width:"50",label:"#"}),e(w,{prop:"productCode",label:"Product Code",width:"130",sortable:""},{default:t(l=>[n("span",Ht,o(l.row.productCode),1)]),_:1}),e(w,{prop:"nameMajor",label:"Product Name",sortable:"","min-width":"180"},{default:t(l=>[n("div",Qt,[n("strong",null,o(l.row.nameMajor),1),l.row.nameMinor?(u(),f("div",Xt,o(l.row.nameMinor),1)):b("",!0)])]),_:1}),e(w,{prop:"category",label:"Category",width:"130",sortable:""},{default:t(l=>[l.row.category?(u(),_(p,{key:0,type:"info",size:"small"},{default:t(()=>[r(o(l.row.category),1)]),_:2},1024)):(u(),f("span",Yt,"--"))]),_:1}),e(w,{prop:"status",label:"Status",width:"100",sortable:""},{default:t(l=>[e(p,{type:l.row.status==="onsale"?"success":"info",effect:l.row.status==="onsale"?"dark":"plain"},{default:t(()=>[r(o(l.row.status==="onsale"?"On Sale":"Off Sale"),1)]),_:2},1032,["type","effect"])]),_:1}),e(w,{prop:"specModel",label:"Spec Model",width:"120"},{default:t(l=>[l.row.specModel?(u(),f("span",Jt,o(l.row.specModel),1)):(u(),f("span",Zt,"--"))]),_:1}),e(w,{label:"SKUs",width:"100"},{default:t(l=>[n("div",ea,[l.row.skus&&l.row.skus.length>0?(u(),_(p,{key:0,type:"primary",style:{cursor:"pointer"}},{default:t(()=>[r(o(l.row.skus.length)+" SKUs ",1)]),_:2},1024)):(u(),_(p,{key:1,type:"info",effect:"plain"},{default:t(()=>[...a[25]||(a[25]=[r("0",-1)])]),_:1}))])]),_:1}),e(w,{label:"Specs",width:"100"},{default:t(l=>[l.row.specifications&&l.row.specifications.length>0?(u(),_(p,{key:0,type:"warning",size:"small"},{default:t(()=>[r(o(l.row.specifications.length),1)]),_:2},1024)):(u(),f("span",ta,"--"))]),_:1}),e(w,{prop:"createdAt",label:"Created",width:"140",sortable:""},{default:t(l=>[n("div",aa,[n("div",la,o(Pe(l.row.createdAt)),1),n("div",sa,o($e(l.row.createdAt)),1)])]),_:1}),e(w,{label:"Actions",width:"180",fixed:"right"},{default:t(l=>[e(Ee,null,{default:t(()=>[e(z,{size:"small",onClick:i=>ze(l.row),title:"View Details"},{default:t(()=>[e(T,null,{default:t(()=>[e(N(Xe))]),_:1})]),_:1},8,["onClick"]),e(z,{size:"small",type:"primary",onClick:i=>Fe(l.row),title:"Edit"},{default:t(()=>[e(T,null,{default:t(()=>[e(N(he))]),_:1})]),_:1},8,["onClick"]),e(z,{size:"small",type:"danger",onClick:i=>Le(l.row.id),title:"Delete"},{default:t(()=>[e(T,null,{default:t(()=>[e(N(Ye))]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Ne,x.value]]),n("div",oa,[n("div",na,[r(" Showing "+o(ee.value)+"-"+o(y.value)+" of "+o(P.value.length)+" products ",1),F.value?(u(),f("span",ua," (filtered from "+o(A.value.length)+" total) ",1)):b("",!0)]),e(je,{"current-page":L.value,"onUpdate:currentPage":a[9]||(a[9]=l=>L.value=l),"page-size":E.value,"onUpdate:pageSize":a[10]||(a[10]=l=>E.value=l),total:P.value.length,"page-sizes":[10,20,50,100],layout:"sizes, prev, pager, next",background:""},null,8,["current-page","page-size","total"])]),P.value.length===0&&!x.value?(u(),f("div",ra,[e(me,{description:"No products found"},{description:t(()=>[F.value?(u(),f("p",da,"No products match your current filters.")):(u(),f("p",ia,"No products found. Start by adding your first product!"))]),default:t(()=>[F.value?(u(),_(z,{key:1,onClick:ie},{default:t(()=>[...a[27]||(a[27]=[r(" Clear Filters ",-1)])]),_:1})):(u(),_(z,{key:0,type:"primary",onClick:fe},{default:t(()=>[...a[26]||(a[26]=[r(" Add Your First Product ",-1)])]),_:1}))]),_:1})])):b("",!0)]),_:1}),e(re,{modelValue:C.value,"onUpdate:modelValue":a[12]||(a[12]=l=>C.value=l),title:"Add Product",size:"70%",direction:"rtl"},{default:t(()=>[C.value?(u(),_(we,{key:0,mode:"add",onSaved:ve,onCancel:a[11]||(a[11]=l=>C.value=!1)})):b("",!0)]),_:1},8,["modelValue"]),e(re,{modelValue:c.value,"onUpdate:modelValue":a[14]||(a[14]=l=>c.value=l),title:`Edit Product - ${M.value?.nameMajor||""}`,size:"70%",direction:"rtl"},{default:t(()=>[c.value&&M.value?(u(),_(we,{key:0,mode:"edit","product-id":M.value?.id,onSaved:ve,onCancel:a[13]||(a[13]=l=>c.value=!1)},null,8,["product-id"])):b("",!0)]),_:1},8,["modelValue","title"]),e(re,{modelValue:k.value,"onUpdate:modelValue":a[16]||(a[16]=l=>k.value=l),title:"Product Details",size:"60%",direction:"rtl"},{default:t(()=>[k.value&&K.value?(u(),_(kt,{key:0,product:K.value,onEdit:Ke,onClose:a[15]||(a[15]=l=>k.value=!1)},null,8,["product"])):b("",!0)]),_:1},8,["modelValue"]),e(Be,{modelValue:$.value,"onUpdate:modelValue":a[17]||(a[17]=l=>$.value=l),title:"Product Statistics",width:"500px"},{default:t(()=>[V.value?(u(),f("div",ca,[e(ue,{gutter:20},{default:t(()=>[e(U,{span:12},{default:t(()=>[e(X,{title:"Total Products",value:V.value.total},null,8,["value"])]),_:1}),e(U,{span:12},{default:t(()=>[e(X,{title:"Active Products",value:V.value.active},null,8,["value"])]),_:1})]),_:1}),e(ue,{gutter:20,style:{"margin-top":"20px"}},{default:t(()=>[e(U,{span:12},{default:t(()=>[e(X,{title:"With Multiple Units",value:V.value.withMultiUnits},null,8,["value"])]),_:1}),e(U,{span:12},{default:t(()=>[e(X,{title:"With Specifications",value:V.value.withSpecs},null,8,["value"])]),_:1})]),_:1}),a[30]||(a[30]=n("h4",{style:{"margin-top":"20px"}},"Categories Distribution",-1)),(u(!0),f(q,null,R(V.value.categories,(l,i)=>(u(),f("div",{key:i,class:"category-item"},[n("span",null,o(i)+":",1),n("span",null,o(l),1)]))),128)),a[31]||(a[31]=n("h4",{style:{"margin-top":"20px"}},"SKU Statistics",-1)),n("div",fa,[n("div",va,[a[28]||(a[28]=n("span",{class:"label"},"Total SKUs:",-1)),n("span",pa,o(H.value),1)]),n("div",ma,[a[29]||(a[29]=n("span",{class:"label"},"Avg SKUs per Product:",-1)),n("span",_a,o(be.value),1)])])])):b("",!0)]),_:1},8,["modelValue"])])}}},ba=de(ya,[["__scopeId","data-v-807e505e"]]);export{ba as default};
